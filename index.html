<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SleepCalc</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
  <div class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md">
    <h1 class="text-3xl font-semibold text-center mb-6">SleepCalc</h1>

    <div class="space-y-4">
      <div class="flex items-center">
        <input type="radio" name="mode" value="sleep" checked
               class="h-5 w-5 text-indigo-600 focus:ring-indigo-500"/>
        <label class="ml-2 flex-grow text-gray-700">
          Sleep at
          <input type="time" id="sleepTime"
                 class="ml-2 mt-1 block w-32 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"/>
        </label>
      </div>

      <div class="flex items-center">
        <input type="radio" name="mode" value="wake"
               class="h-5 w-5 text-indigo-600 focus:ring-indigo-500"/>
        <label class="ml-2 flex-grow text-gray-700">
          Wake at
          <input type="time" id="wakeTime" disabled
                 class="ml-2 mt-1 block w-32 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"/>
        </label>
      </div>

      <div>
        <label class="block text-gray-700 mb-1">
          Cycles: <span id="cycleCount" class="font-medium">5</span>
        </label>
        <input type="range" id="cycles" min="1" max="10" value="5"
               class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer"/>
      </div>

      <button id="calc"
              class="w-full py-2 mt-4 bg-indigo-600 text-white font-semibold rounded-lg shadow hover:bg-indigo-700 transition">
        Calculate
      </button>

      <ul id="results" class="mt-4 space-y-2 text-gray-800"></ul>
    </div>
  </div>

  <script>
    const CYCLE = 90 * 60e3;
    const sleepEl = document.getElementById('sleepTime'),
          wakeEl  = document.getElementById('wakeTime'),
          cycles  = document.getElementById('cycles'),
          count   = document.getElementById('cycleCount'),
          results = document.getElementById('results'),
          radios  = document.getElementsByName('mode');

    radios.forEach(r => r.onchange = () => {
      sleepEl.disabled = r.value !== 'sleep';
      wakeEl.disabled  = r.value === 'sleep';
    });

    cycles.oninput = () => count.textContent = cycles.value;

    document.getElementById('calc').onclick = () => {
      results.innerHTML = '';
      const mode = document.querySelector('[name=mode]:checked').value;
      const t0   = Date.parse(`1970-01-01T${document.getElementById(mode + 'Time').value}`);
      const t    = new Date(t0 + (mode === 'sleep' ? 1 : -1) * cycles.value * CYCLE)
                         .toTimeString().slice(0,5);
      const label = mode === 'sleep' ? 'Wake at' : 'Sleep at';
      results.innerHTML = `<li class="bg-indigo-50 p-3 rounded">${label} <span class="font-medium">${t}</span></li>`;
    };
  </script>
</body>
</html>
